from django.shortcuts import render_to_response
from django.http import HttpResponse
from utilidades import *
from django.template import RequestContext
from api_puntoDeInteres import *

EVENT_FIELDS_BASIC = ["altitud","descripcion","latitud","longitud","nombre","paginaWeb","telefono"]
CAMPOS_LISTADO_PDI = ["latitud","longitud","rangoMaximoAlcance"]

def registrarPDI(request):
	if request.method == "POST":
		success, params = extract_params(request.POST,EVENT_FIELDS_BASIC)
       
		if success:
			return HttpResponse(params)
		else:			
			return HttpResponse(params)	
	else: 
		return render_to_response("PDI/registrar_poi.html", context_instance=RequestContext(request))
	
	
def obtenerListadoPuntosDeInteres(request):	
	if request.method == "POST":
		exito, params = extract_params(request.POST,EVENT_FIELDS_BASIC)
		print params
		if exito:
			#obtenerListadoPuntosDeInteres(parametros['latitud'],parametros['longitud'],parametros['rangoMaximoAlcance'])
			return HttpResponse(parametros)
		else:
			return render_to_json("PDI/respuesta/error.json",{'codigo':200, 'mensaje':params})
	else:
		return	render_to_json("PDI/respuesta/error.json",{'codigo':200, 'mensaje':'La peticion no es post'})
		
				
